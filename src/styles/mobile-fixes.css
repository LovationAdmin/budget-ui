/* ============================================================================
   CORRECTIONS ERGONOMIE MOBILE - Google Search Console
   ============================================================================
   
   Problèmes détectés :
   1. Éléments cliquables trop rapprochés
   2. Contenu plus large que l'écran
   3. Texte illisible, car trop petit
   
   ============================================================================ */

/* ============================================================================
   1. TEXTE LISIBLE - Taille minimale 16px
   ============================================================================ */

/* Taille de base du texte */
html {
  font-size: 16px; /* Base pour rem */
  -webkit-text-size-adjust: 100%; /* Empêche le zoom automatique iOS */
}

body {
  font-size: 1rem; /* 16px minimum */
  line-height: 1.5; /* Hauteur de ligne confortable */
}

/* Textes trop petits - Forcer minimum 14px */
.text-xs {
  font-size: 0.875rem !important; /* 14px au lieu de 12px */
}

.text-sm {
  font-size: 0.9375rem !important; /* 15px au lieu de 14px */
}

/* Input et boutons - Taille minimale */
input,
button,
select,
textarea {
  font-size: 1rem !important; /* 16px minimum pour éviter le zoom iOS */
}

/* Labels */
label {
  font-size: 0.9375rem; /* 15px minimum */
}

/* Descriptions et textes secondaires */
.text-muted-foreground,
.text-gray-500,
.text-gray-600 {
  font-size: 0.875rem !important; /* 14px minimum */
}

/* ============================================================================
   2. ÉLÉMENTS CLIQUABLES - Espacement minimum 48px
   ============================================================================ */

/* Taille minimale des boutons (Google recommande 48x48px) */
button,
.btn,
a[role="button"],
[role="button"] {
  min-height: 48px;
  min-width: 48px;
  padding: 12px 16px;
  touch-action: manipulation; /* Améliore la réactivité tactile */
}

/* Boutons icons - Taille minimale */
button[class*="size-icon"],
.size-icon {
  min-height: 48px !important;
  min-width: 48px !important;
}

/* Espacement entre éléments cliquables */
button + button,
a + button,
button + a {
  margin-left: 8px;
}

/* Navigation et liens */
nav a,
.nav-link {
  min-height: 48px;
  display: inline-flex;
  align-items: center;
  padding: 12px 16px;
}

/* Checkbox et Radio - Zone cliquable plus grande */
input[type="checkbox"],
input[type="radio"] {
  min-width: 24px;
  min-height: 24px;
  margin: 8px;
}

/* Labels de checkbox/radio - Zone cliquable étendue */
label:has(input[type="checkbox"]),
label:has(input[type="radio"]) {
  padding: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Cards cliquables - Espacement */
.glass-card,
.card {
  margin-bottom: 16px; /* Espacement vertical entre cards */
}

/* Liens dans texte - Espacement vertical */
p a,
li a {
  padding: 4px 2px;
  margin: 2px 0;
  display: inline-block;
}

/* ============================================================================
   3. CONTENU PLUS LARGE QUE L'ÉCRAN - Responsive
   ============================================================================ */

/* Empêcher le débordement horizontal */
* {
  box-sizing: border-box;
}

html,
body {
  overflow-x: hidden; /* Empêche le scroll horizontal */
  max-width: 100vw;
}

/* Containers - Largeur maximale 100% */
.container,
.max-w-7xl,
.max-w-6xl,
.max-w-5xl,
.max-w-4xl,
.max-w-3xl,
.max-w-2xl,
.max-w-xl {
  max-width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Images responsive */
img {
  max-width: 100%;
  height: auto;
}

/* Tables responsive */
table {
  width: 100%;
  overflow-x: auto;
  display: block;
}

@media (max-width: 768px) {
  table {
    font-size: 0.875rem; /* 14px */
  }
}

/* Grids responsive */
.grid {
  width: 100%;
}

/* Flexbox - Éviter le débordement */
.flex {
  flex-wrap: wrap;
}

/* Formulaires - Largeur 100% sur mobile */
@media (max-width: 768px) {
  input,
  select,
  textarea {
    width: 100%;
    max-width: 100%;
  }
}

/* Modals et Dialogs - Adapter à l'écran */
.dialog-content,
[role="dialog"] {
  max-width: calc(100vw - 2rem);
  max-height: calc(100vh - 2rem);
  margin: 1rem;
}

/* Navigation mobile - Scroll horizontal */
.nav-tabs,
.nav-pills {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  white-space: nowrap;
}

/* Cards - Responsive */
@media (max-width: 640px) {
  .grid-cols-2,
  .grid-cols-3,
  .sm\\:grid-cols-2,
  .lg\\:grid-cols-3 {
    grid-template-columns: 1fr !important;
  }
}

/* ============================================================================
   4. OPTIMISATIONS SPÉCIFIQUES MOBILE
   ============================================================================ */

/* Touch targets - Zone tactile confortable */
@media (pointer: coarse) {
  /* Augmenter la taille sur appareils tactiles */
  button,
  a,
  input,
  select {
    min-height: 48px;
    padding: 14px 18px;
  }
}

/* Éviter les hovers sur mobile */
@media (hover: none) {
  .hover\\:scale-\\[1\\.02\\]:hover,
  .hover\\:shadow-elevated:hover {
    transform: none;
    box-shadow: inherit;
  }
}

/* Scroll fluide sur iOS */
* {
  -webkit-overflow-scrolling: touch;
}

/* Désactiver le tap highlight sur iOS */
* {
  -webkit-tap-highlight-color: transparent;
}

/* ============================================================================
   5. CORRECTIONS SPÉCIFIQUES BUDGETFAMILLE.COM
   ============================================================================ */

/* Dashboard - Cards budget */
@media (max-width: 640px) {
  .glass-card {
    padding: 1rem; /* Réduire padding sur mobile */
  }
  
  /* Boutons dans les cards - Stack vertical */
  .glass-card .flex {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .glass-card button,
  .glass-card a {
    width: 100%;
    justify-content: center;
  }
}

/* Navigation - Responsive */
@media (max-width: 768px) {
  .budget-navbar {
    padding: 0.75rem 1rem;
  }
  
  /* Titre budget - Taille adaptée */
  .budget-navbar h1 {
    font-size: 1.25rem; /* 20px au lieu de 24px+ */
  }
}

/* Tableau mensuel - Scroll horizontal */
.monthly-table-container {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

@media (max-width: 768px) {
  .monthly-table {
    min-width: 600px; /* Force scroll horizontal plutôt que squeeze */
  }
}

/* Forms - Labels au-dessus des inputs */
@media (max-width: 640px) {
  .form-group,
  .space-y-2 {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  label {
    margin-bottom: 0.25rem;
  }
}

/* Modals - Plein écran sur mobile */
@media (max-width: 640px) {
  [role="dialog"],
  .dialog-content {
    max-width: 100vw;
    max-height: 100vh;
    margin: 0;
    border-radius: 0;
  }
}

/* Stats cards - Stack vertical */
@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: 1fr !important;
    gap: 1rem;
  }
}

/* Reality Check - Layout mobile */
@media (max-width: 640px) {
  .reality-check-container {
    flex-direction: column;
    gap: 1rem;
  }
  
  .reality-check-item {
    width: 100%;
    text-align: center;
  }
}

/* ============================================================================
   6. ACCESSIBILITÉ
   ============================================================================ */

/* Focus visible pour navigation clavier */
*:focus-visible {
  outline: 2px solid #6366f1; /* Indigo-600 */
  outline-offset: 2px;
}

/* Contraste minimum pour le texte */
.text-muted-foreground {
  color: #64748b; /* Slate-500 - Ratio 4.5:1 minimum */
}

/* Skip to main content */
.skip-to-main {
  position: absolute;
  left: -9999px;
  z-index: 999;
}

.skip-to-main:focus {
  left: 0;
  top: 0;
  background: white;
  padding: 1rem;
}

/* ============================================================================
   7. PERFORMANCE MOBILE
   ============================================================================ */

/* Lazy loading images */
img[loading="lazy"] {
  content-visibility: auto;
}

/* Reduce motion pour utilisateurs sensibles */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================================================
   8. CORRECTIONS VIEWPORT
   ============================================================================ */

/* Éviter le zoom sur focus input (iOS) */
@media (max-width: 768px) {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  select,
  textarea {
    font-size: 16px !important; /* Minimum 16px pour éviter le zoom iOS */
  }
}

/* Safe area pour iPhone X+ */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
  }
}